# SpringCloud

### 1장. 스프링, 클라우드와 만나다.

##### 1. 마이크로서비스란

  모놀리식 아키텍처에서 애플리케이션은 배포가능한 단일 소프트웨어 산출물로 전달, UI, 비즈니스 로직, 데이터베이 엑세스 로직이 모두 하나의 애플리케이션 산출물로 패키징 및 배포됨
  대형 모놀리식 애플리케이션을 확장하려고 할 떄, 기술 및 조직적으로 생기는 난제를 해결하기 위해 **마이크로서비스**가 등장했다.

  마이크로서비스의 특징
  - 애플리케이션 로직을 각자 책임이 명확한 작은 컴퍼넌트로들로 분해하고 이들을 조합하여 솔루션을 제공
  - 각 컴포넌트는 작은 책임영역을 담당하고, 완전히 상호 독립적으로 배포된다(비즈니스 영역의 한 부분에서만 책임을 담당)
  - 재사용이 가능해야 한다.
  - 몇가지 기본 원칙에 기반을 두며, 서비스 제공자 사이의 데이터 교환을 위해 HTTP와 JSON같은 경량 통신 프로토콜을 사용
  - 애플리케이션은 기술중립적 프로토콜을 사용해 통신하므로 서비스 구현 기술과는 무관, 즉 다양한 언어와 기술로 구축할 수 있음
  - 작고 독립적이며 분산된 마이크로 서비스를 사용해 조직은 명확히 정의된 책임 영역을 담당하는 소규모 팀을 보유할 수 있음. 하나의 목표를 가지지만, 자기가 개발한 서비스만 책임진다.

##### 2. 스프링부트에서 마이크로서비스의 흐름
  1. 클라이언트 요청
    - 클라이언트가 마이크로서비스에 HTTP GET 요청을 보낸다 (ex. GET http://localhost:8080/test/hello)
  3. 경로매핑
    - 스프링 부트는 HTTP 요청을 파싱하고, HTTP 동사(verb)와 URL, URL에 정의;된 매개변수를 기반으로 경로를 매핑한다. 경로는 스프링 RESTController 클래스의 메소드에 매핑된다.
  5. 매개변수분해
    - 스프링부트가 경로를 인식하면 경로 내부에 정의된 매개변수를 작업을  수행할 자바 메서드에 매핑한다.
  7. JSON -> 자바 객체 매핑
    - HTTP PUT이나 POST는 HTTP 본문(body)에 전달된 JSON을 자바 클래스에 매핑한다.
  8. 비즈니스 로직 수행
    - 모든 데이터가 매핑되면 스프링 부트는 비즈니스 로직을 수행한다.
  9. 자바객체 -> JSON 매핑
    - 비즈니스 로직이 실행되면 스프링 부트는 자바 객체를 JSON으로 변환한다.
  11. 응답값 반환
    - 클라이언트는 서비스에 변환된 비즈니스 결과물을 JSON으로 응답을 받는다. 호출 성공과 실패는 HTTP상태 코드로 반환된다.
